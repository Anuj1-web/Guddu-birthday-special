<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Personal Message</title>
  <style>
    /* === Theme copied from index page === */
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0d0d0d, #1a1a1a);
      color: #fff;
    }
    header {
      background: rgba(0,0,0,0.85);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 1.5rem;
      color: #ffcc00;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      margin-left: 1rem;
      font-weight: 500;
    }
    nav a:hover {
      color: #ffcc00;
    }
    main {
      max-width: 1100px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    .card {
      background: #1f1f1f;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    .card h2 {
      margin-top: 0;
      color: #ffcc00;
    }
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1rem;
    }
    .gallery img, .gallery video {
      width: 100%;
      border-radius: 8px;
      display: block;
    }
    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
      color: #888;
    }
  </style>
</head>
<body>
  <header>
    <h1>Special Message</h1>
    <nav>
      <a href="index.html">Home</a>
    </nav>
  </header>

  <main>
    <section class="card">
      <h2>My Personal Message to You</h2>
      <p>Hereâ€™s a special collection of memories and moments, just for you.</p>
    </section>

    <section class="card">
      <h2>Memories</h2>
      <div class="gallery">
        <!-- Replace src with your GitHub image links -->
        <img src="https://via.placeholder.com/400x250?text=Image+1" alt="Memory 1">
        <img src="https://via.placeholder.com/400x250?text=Image+2" alt="Memory 2">
        <video src="https://www.w3schools.com/html/mov_bbb.mp4" controls></video>
        <img src="https://via.placeholder.com/400x250?text=Image+3" alt="Memory 3">
        <video src="https://www.w3schools.com/html/mov_bbb.mp4" controls></video>
      </div>
    </section>
  </main>

  <footer>
    &copy; 2025 Your Name. All rights reserved.
  </footer>

  <!-- Hidden background audio -->
  <audio id="bgMusic"
         src="https://github.com/Anuj1-web/Guddu-birthday-special/raw/refs/heads/main/Full%20Video_Tu%20Hi%20Yaar%20Mera%20%20Pati%20Patni%20Aur%20Woh%20%20Kartik%20A,Bhumi%20P,Ananya%20P%20Rochak,Arijit%20S,Neha%20K.mp3"
         preload="auto"
         loop
         playsinline></audio>

  <!-- Autoplay script -->
  <script>
    /* personal-message.js inline */
    (function () {
      const audio = document.getElementById('bgMusic');
      if (!audio) return;
      audio.setAttribute('preload', 'auto');
      audio.setAttribute('playsinline', '');
      audio.loop = true;
      const TARGET_VOL = 0.7;
      audio.volume = 0.0;
      const STORAGE_KEY = 'pm_audio_ok';
      let userApprovedBefore = localStorage.getItem(STORAGE_KEY) === '1';
      let trying = false;
      let fadeTimer = null;
      let retryTimer = null;
      function fadeTo(target = TARGET_VOL, ms = 800) {
        clearInterval(fadeTimer);
        const steps = Math.max(8, Math.floor(ms / 40));
        const delta = (target - audio.volume) / steps;
        let i = 0;
        fadeTimer = setInterval(() => {
          i++;
          audio.volume = Math.max(0, Math.min(1, audio.volume + delta));
          if (i >= steps) clearInterval(fadeTimer);
        }, 40);
      }
      function markApproved() { try { localStorage.setItem(STORAGE_KEY, '1'); } catch {} }
      function onPlayedOk() { markApproved(); detachGestureArming(); fadeTo(TARGET_VOL, 900); }
      async function tryPlay(reason = 'attempt') {
        if (trying) return;
        trying = true;
        try {
          if (userApprovedBefore) {
            await audio.play(); onPlayedOk(); trying = false; return;
          }
          await audio.play(); onPlayedOk();
        } catch (e1) {
          try {
            audio.muted = true;
            await audio.play();
            armForUnmute();
            markApproved();
          } catch (e2) {
            armForPlay();
            scheduleRetry();
          }
        } finally { trying = false; }
      }
      function scheduleRetry() { clearTimeout(retryTimer); retryTimer = setTimeout(() => tryPlay('retry'), 2500); }
      function armForPlay() {
        window.addEventListener('pointerdown', gesturePlayOnce, { passive: true, once: true });
        window.addEventListener('touchstart', gesturePlayOnce, { passive: true, once: true });
        window.addEventListener('keydown', gesturePlayOnce, { passive: true, once: true });
        document.addEventListener('visibilitychange', visPlayOnce, { passive: true });
      }
      function detachGestureArming() {
        window.removeEventListener('pointerdown', gesturePlayOnce);
        window.removeEventListener('touchstart', gesturePlayOnce);
        window.removeEventListener('keydown', gesturePlayOnce);
        document.removeEventListener('visibilitychange', visPlayOnce);
        document.removeEventListener('visibilitychange', visUnmuteOnce);
        window.removeEventListener('pointerdown', unmuteOnce);
        window.removeEventListener('touchstart', unmuteOnce);
        window.removeEventListener('keydown', unmuteOnce);
      }
      function gesturePlayOnce() { tryPlay('gesture'); }
      function visPlayOnce() { if (document.visibilityState === 'visible') { tryPlay('visible'); } }
      function armForUnmute() {
        window.addEventListener('pointerdown', unmuteOnce, { passive: true, once: true });
        window.addEventListener('touchstart', unmuteOnce, { passive: true, once: true });
        window.addEventListener('keydown', unmuteOnce, { passive: true, once: true });
        document.addEventListener('visibilitychange', visUnmuteOnce, { passive: true });
      }
      function unmuteOnce() {
        if (!audio.paused) {
          audio.muted = false; fadeTo(TARGET_VOL, 700); detachGestureArming(); markApproved();
        } else { tryPlay('unmute-gesture'); }
      }
      function visUnmuteOnce() {
        if (document.visibilityState !== 'visible') return;
        if (!audio.paused) {
          audio.muted = false; fadeTo(TARGET_VOL, 700); detachGestureArming(); markApproved();
        } else { tryPlay('unmute-visible'); }
      }
      try {
        const AudioCtx = window.AudioContext || window.webkitAudioContext;
        if (AudioCtx) {
          const ac = new AudioCtx();
          if (ac.state === 'suspended') {
            const resumeAC = () => { ac.resume().catch(() => {}); window.removeEventListener('pointerdown', resumeAC); window.removeEventListener('touchstart', resumeAC); window.removeEventListener('keydown', resumeAC); };
            window.addEventListener('pointerdown', resumeAC, { passive: true });
            window.addEventListener('touchstart', resumeAC, { passive: true });
            window.addEventListener('keydown', resumeAC, { passive: true });
          }
        }
      } catch {}
      audio.addEventListener('ended', () => { audio.currentTime = 0; tryPlay('ended'); });
      if (document.readyState === 'complete' || document.readyState === 'interactive') {
        tryPlay('init');
      } else {
        window.addEventListener('load', () => tryPlay('load'));
      }
    })();
  </script>
</body>
</html>
