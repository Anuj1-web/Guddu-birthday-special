<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Guddu ‚Äî Magical Birthday Show ‚ú®</title>
<meta name="description" content="A continuous, mobile-perfect sky show for Guddu with music: stars forming text, shooting stars, hearts & balloons, aurora, compliments, secret letter, fireworks, and a lovely finale.">
<style>
  :root{
    --ink:#eef2ff; --muted:#c8d1ff; --deep:#030616; --deep2:#0a0f2b;
    --rose:#ff92dc; --gold:#ffd98a; --aqua:#89f3ff; --vio:#c0a2ff; --mint:#9ff9cf;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background: radial-gradient(1200px 800px at 10% -10%, #1b1652 0%, #0b0f2b 45%, #030616 85%);
    overflow:hidden; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  }

  /* Ambient aurora glow */
  .aurora{position:fixed; inset:-18% -10% -10% -10%; z-index:0; filter: blur(44px) saturate(120%); pointer-events:none}
  .a{position:absolute; width:70vw; height:70vw; border-radius:50%; mix-blend-mode:screen;}
  .a1{left:-8vw; top:-6vh; background: radial-gradient(circle, #3ae1ff60, #6a54ff36, #0000 70%); animation: drift 18s ease-in-out infinite}
  .a2{right:-14vw; top:10vh; background: radial-gradient(circle, #ff54d455, #ffe28f33, #0000 70%); animation: drift 24s ease-in-out infinite reverse}
  .a3{left:22vw; bottom:-12vh; background: radial-gradient(circle, #79ffbe55, #7ea2ff33, #0000 70%); animation: drift 22s ease-in-out infinite}
  @keyframes drift{0%,100%{transform:translateY(0)}50%{transform:translateY(-2.5vh)}}

  /* Starry background canvas (always on) */
  #sky{position:fixed; inset:0; z-index:1; display:block; width:100%; height:100%}

  /* Stage & scenes */
  .stage{position:fixed; inset:0; display:grid; place-items:center; z-index:2}
  .scene{position:absolute; inset:0; opacity:0; pointer-events:none; transition:opacity 900ms ease}
  .scene.live{opacity:1; pointer-events:auto}
  canvas.scene-cv{display:block; width:100%; height:100%}

  /* Banner */
  .banner{position:absolute; top:10px; left:50%; transform:translateX(-50%);
    background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.07));
    border:1px solid rgba(255,255,255,.18); padding:6px 12px; border-radius:999px;
    font-weight:800; letter-spacing:.2px; font-size:12px; opacity:.9; z-index:3
  }

  /* Messages (each scene gets one) */
  .centerWrap{position:absolute; inset:0; display:grid; place-items:center; text-align:center; padding:0 6vw}
  .msg{font-size:clamp(18px, 5.2vw, 42px); font-weight:900; letter-spacing:.3px; text-shadow:0 2px 30px rgba(255,255,255,.28)}
  .sub{margin-top:10px; font-size:clamp(14px, 3.8vw, 20px); color:var(--muted)}
  .twinkle{animation:twinkle 2.2s ease-in-out infinite}
  @keyframes twinkle{0%,100%{filter:drop-shadow(0 0 0 rgba(255,255,255,0))}50%{filter:drop-shadow(0 0 16px rgba(255,255,255,.55))}}

  /* Compliments orb */
  .orb{position:absolute; width:min(64vw, 380px); aspect-ratio:1; border-radius:50%;
    left:50%; top:50%; transform:translate(-50%,-50%);
    background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.98), rgba(180,215,255,.82) 40%, rgba(120,160,255,.5) 65%, rgba(60,90,220,.28) 80%, rgba(30,40,120,.12));
    border:1px solid rgba(255,255,255,.55);
    box-shadow:0 0 110px rgba(160,200,255,.6), inset 0 0 60px rgba(255,255,255,.9);
    display:grid; place-items:center; text-align:center; padding:24px; color:#0c1c3a; font-weight:900; letter-spacing:.3px; font-size:clamp(16px,3.8vw,22px);
  }

  /* Secret letter */
  .letterWrap{position:absolute; inset:0; display:grid; place-items:center}
  .paper{
    width:min(92vw,780px); min-height:50vh; padding:22px 18px; line-height:1.75;
    background:linear-gradient(180deg,#fff,#f7fbff); color:#0b1a35; border-radius:14px;
    border:1px solid rgba(0,0,0,.06); box-shadow:0 35px 80px rgba(0,0,0,.35);
    transform:perspective(1200px) rotateX(8deg) translateY(6px); opacity:.98;
    font-size:clamp(14px, 3.6vw, 18px)
  }
  .caret{display:inline-block; width:10px; height:1.1em; background:currentColor; animation:blink 1s steps(2,start) infinite}
  @keyframes blink{50%{opacity:0}}

  /* Music pill / unmute fallback */
  .music-pill{position:fixed; bottom:14px; left:50%; transform:translateX(-50%);
    background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.2); border-radius:999px;
    padding:6px 12px; font-size:.9rem; display:flex; gap:10px; align-items:center;
    box-shadow:0 10px 28px rgba(0,0,0,.35); z-index:5
  }
  .music-pill button{background:transparent; border:none; color:var(--ink); cursor:pointer; font-weight:700}
  .hidden{display:none}
</style>
</head>
<body>
  <!-- Ambient glows -->
  <div class="aurora" aria-hidden="true"><div class="a a1"></div><div class="a a2"></div><div class="a a3"></div></div>

  <!-- Continuous subtle twinkling sky -->
  <canvas id="sky"></canvas>

  <div class="stage">
    <div class="banner">A Night of Surprises for Guddu ‚ú®</div>

    <!-- SCENE 1: Intro -->
    <section class="scene live" id="scene-intro">
      <div class="centerWrap">
        <div>
          <div class="msg twinkle">Here are the cute surprises for the cutest Guddu üíñ</div>
          <div class="sub">Sit back and enjoy‚Ä¶</div>
        </div>
      </div>
    </section>

    <!-- SCENE 2: Stars form text -->
    <section class="scene" id="scene-startext">
      <canvas id="cv-startext" class="scene-cv"></canvas>
      <div class="centerWrap"><div><div class="sub twinkle">Your smile lights up the sky ‚ú®</div></div></div>
    </section>

    <!-- SCENE 3: Shooting stars -->
    <section class="scene" id="scene-shoot">
      <canvas id="cv-shoot" class="scene-cv"></canvas>
      <div class="centerWrap"><div><div class="sub twinkle">Every wish I make is for your happiness üí´</div></div></div>
    </section>

    <!-- SCENE 4: Hearts & balloons -->
    <section class="scene" id="scene-hearts">
      <canvas id="cv-hearts" class="scene-cv"></canvas>
      <div class="centerWrap"><div><div class="sub twinkle">Because you deserve endless love üíï</div></div></div>
    </section>

    <!-- SCENE 5: Aurora waves -->
    <section class="scene" id="scene-aurora">
      <canvas id="cv-aurora" class="scene-cv"></canvas>
      <div class="centerWrap"><div><div class="sub twinkle">The world is more colorful with you in it üåà</div></div></div>
    </section>

    <!-- SCENE 6: Compliments mirror -->
    <section class="scene" id="scene-mirror">
      <div class="orb" id="orb">You are starlight ‚ú®</div>
      <div class="centerWrap"><div><div class="sub twinkle">And still, words are never enough to describe you ‚ú®</div></div></div>
    </section>

    <!-- SCENE 7: Secret letter -->
    <section class="scene" id="scene-letter">
      <div class="letterWrap"><div class="paper"><div id="typeArea"></div></div></div>
      <div class="centerWrap"><div><div class="sub twinkle">Forever yours, with love üíå</div></div></div>
    </section>

    <!-- SCENE 8: Fireworks phrases -->
    <section class="scene" id="scene-fire">
      <canvas id="cv-fire" class="scene-cv"></canvas>
      <div class="centerWrap"><div><div class="sub twinkle">You are loved, today and always üéÜ</div></div></div>
    </section>

    <!-- SCENE 9: Finale message -->
    <section class="scene" id="scene-finale">
      <div class="centerWrap">
        <div>
          <div class="msg twinkle">Guddu, you are the most special part of our lives üíñ</div>
          <div class="sub">Forever with love, always.</div>
        </div>
      </div>
    </section>
  </div>

  <!-- Music -->
  <audio id="bgm" src="https://github.com/Anuj1-web/Guddu-birthday-special/raw/refs/heads/main/Hum%20Mar%20Jayenge%20(Aashiqui%202)-(Mr-Jat.in).mp3" preload="auto" autoplay loop playsinline></audio>
  <div id="musicCtl" class="music-pill">
    <span id="musicLabel">Sound: On</span>
    <button id="toggleMusic" aria-label="Toggle Sound">‚è∏Ô∏é</button>
    <button id="tapForSound" class="hidden">Tap for sound üéµ</button>
  </div>

<script>
/* ===================== UTILITIES ===================== */
const $=(s,el=document)=>el.querySelector(s), $$=(s,el=document)=>[...el.querySelectorAll(s)];
const rand=(a,b)=>Math.random()*(b-a)+a, rInt=(a,b)=>Math.floor(rand(a,b));
function fitCanvas(c){
  const dpr = Math.max(1, Math.min(2, window.devicePixelRatio||1));
  const w = innerWidth, h = innerHeight;
  c.width = Math.floor(w * dpr);
  c.height = Math.floor(h * dpr);
  const ctx = c.getContext('2d');
  ctx.setTransform(dpr,0,0,dpr,0,0); // draw using CSS pixels
  return {ctx, w, h, dpr};
}

/* ===================== SKY BACKGROUND ===================== */
(function initSky(){
  const c=$('#sky'); let {ctx,w,h}=fitCanvas(c);
  addEventListener('resize', ()=>({ctx,w,h}=fitCanvas(c)));
  const stars=Array.from({length:700},()=>({x:rand(0,w), y:rand(0,h), r:rand(.6,1.8), tw:rand(0,6.28), hue:rInt(190,330)}));
  const dust=Array.from({length:35},()=>({x:rand(0,w), y:rand(0,h), vx:rand(-.06,.06), vy:rand(-.03,.03), a:rand(.05,.2)}));
  (function loop(){
    ctx.clearRect(0,0,w,h);
    const g=ctx.createRadialGradient(w*0.5,h*0.2,10, w*0.5,h*0.2, Math.max(w,h));
    g.addColorStop(0,'#15183f'); g.addColorStop(1,'#050716'); ctx.fillStyle=g; ctx.fillRect(0,0,w,h);
    for(const s of stars){
      s.tw+=.02; ctx.beginPath(); ctx.globalAlpha=(Math.sin(s.tw)+1)/3+.22;
      ctx.fillStyle=`hsl(${s.hue}, 90%, 85%)`; ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();
    }
    for(const d of dust){
      d.x+=d.vx; d.y+=d.vy;
      if(d.x<-40) d.x=w+40; if(d.x>w+40) d.x=-40; if(d.y<-40) d.y=h+40; if(d.y>h+40) d.y=-40;
      const r=rand(30,80); const gr=ctx.createRadialGradient(d.x,d.y,0,d.x,d.y,r);
      gr.addColorStop(0,`rgba(255,255,255,${d.a})`); gr.addColorStop(1,'rgba(255,255,255,0)');
      ctx.fillStyle=gr; ctx.beginPath(); ctx.arc(d.x,d.y,r,0,Math.PI*2); ctx.fill();
    }
    requestAnimationFrame(loop);
  })();
})();

/* ===================== TIMELINE (‚âà 105s) ===================== */
const SCENES=[
  { id:'scene-intro',    dur: 6000 },
  { id:'scene-startext', dur: 12000 },
  { id:'scene-shoot',    dur: 12000 },
  { id:'scene-hearts',   dur: 13000 },
  { id:'scene-aurora',   dur: 12000 },
  { id:'scene-mirror',   dur: 12000 },
  { id:'scene-letter',   dur: 16000 },
  { id:'scene-fire',     dur: 14000 },
  { id:'scene-finale',   dur: 7000  }
];
let step=0, timer=null, started=new Set();
function showScene(i){
  $$('.scene').forEach(s=>s.classList.remove('live'));
  const item=SCENES[i], el=$('#'+item.id);
  el.classList.add('live');
  if(!started.has(item.id)){ initScene(item.id); started.add(item.id); }
  clearTimeout(timer);
  timer=setTimeout(()=>{
    step=(step+1)%SCENES.length;
    showScene(step);
    // Fade music gently during finale
    if(step===SCENES.length-1){ fadeMusicOut(6000); }
  }, item.dur);
}
document.addEventListener('DOMContentLoaded', ()=>showScene(0));

/* ===================== MUSIC (autoplay with fallback) ===================== */
const bgm=$('#bgm'), musicCtl=$('#musicCtl'), musicLabel=$('#musicLabel'),
      toggleBtn=$('#toggleMusic'), tapForSound=$('#tapForSound');

async function startMusic(){
  try{
    bgm.muted=true; // allow autoplay
    await bgm.play();
    setTimeout(()=>{ bgm.muted=false; musicLabel.textContent='Sound: On'; toggleBtn.textContent='‚è∏Ô∏é'; }, 250);
  }catch(e){
    tapForSound.classList.remove('hidden');
    musicLabel.textContent='Sound: Off';
    toggleBtn.textContent='‚ñ∂Ô∏é';
  }
}
startMusic();

toggleBtn.addEventListener('click', async ()=>{
  if(bgm.paused){ try{ await bgm.play(); bgm.muted=false; musicLabel.textContent='Sound: On'; toggleBtn.textContent='‚è∏Ô∏é'; tapForSound.classList.add('hidden'); }catch(e){} }
  else { bgm.pause(); musicLabel.textContent='Sound: Off'; toggleBtn.textContent='‚ñ∂Ô∏é'; }
});
tapForSound.addEventListener('click', async ()=>{
  try{ await bgm.play(); bgm.muted=false; musicLabel.textContent='Sound: On'; tapForSound.classList.add('hidden'); toggleBtn.textContent='‚è∏Ô∏é'; }catch(e){}
});
document.addEventListener('visibilitychange', ()=>{ if(!document.hidden && bgm.paused){ bgm.play().catch(()=>{}); }});
function fadeMusicOut(ms){
  const start=bgm.volume, t0=performance.now();
  (function f(t){
    const k=Math.min(1,(t-t0)/ms); bgm.volume=start*(1-k);
    if(k<1) requestAnimationFrame(f); else bgm.volume=0;
  })(performance.now());
}

/* ===================== SCENE DISPATCH ===================== */
function initScene(id){
  ({
    'scene-startext': initStarText,
    'scene-shoot': initShoot,
    'scene-hearts': initHearts,
    'scene-aurora': initAurora,
    'scene-mirror': initMirror,
    'scene-letter': initLetter,
    'scene-fire': initFire,
    'scene-finale': initFinale
  }[id]||(()=>{}))();
}

/* ===================== SCENE 2: Stars form text ===================== */
function initStarText(){
  const c=$('#cv-startext'); let {ctx,w,h}=fitCanvas(c);
  addEventListener('resize', ()=>({ctx,w,h}=fitCanvas(c)));
  const P=Array.from({length:750},()=>({x:rand(0,w), y:rand(0,h), vx:0, vy:0, hue:rInt(200,340)}));
  let targets=[];
  function buildTargets(){
    const oc=document.createElement('canvas'), octx=oc.getContext('2d');
    oc.width=w; oc.height=h; octx.clearRect(0,0,w,h);
    octx.fillStyle='#fff';
    const size=Math.max(24, Math.min(56, w/14));
    octx.font=`900 ${size}px system-ui, -apple-system, Segoe UI, Roboto`;
    octx.textAlign='center'; octx.textBaseline='middle';
    octx.fillText('HAPPY BIRTHDAY GUDDU', w/2, h*0.5);
    const img=octx.getImageData(0,0,w,h).data;
    const gap=Math.max(3, Math.floor(w/420));
    const pts=[];
    for(let y=0;y<h;y+=gap){
      for(let x=0;x<w;x+=gap){
        const a=img[(y*w+x)*4+3]; if(a>200) pts.push({x,y});
      }
    }
    targets=[]; for(let i=0;i<P.length;i++) targets.push(pts[rInt(0,pts.length)]);
  }
  buildTargets();
  (function loop(){
    ctx.fillStyle='rgba(5,6,18,.22)'; ctx.fillRect(0,0,w,h);
    for(let i=0;i<P.length;i++){
      const p=P[i], t=targets[i];
      const ax=(t.x - p.x)*0.026, ay=(t.y - p.y)*0.026;
      p.vx=(p.vx+ax)*0.9; p.vy=(p.vy+ay)*0.9; p.x+=p.vx; p.y+=p.vy;
      ctx.beginPath(); ctx.globalAlpha=.95; ctx.fillStyle=`hsl(${p.hue},90%,70%)`;
      ctx.arc(p.x,p.y,1.4,0,Math.PI*2); ctx.fill();
    }
    requestAnimationFrame(loop);
  })();
}

/* ===================== SCENE 3: Shooting stars ===================== */
function initShoot(){
  const c=$('#cv-shoot'); let {ctx,w,h}=fitCanvas(c);
  addEventListener('resize', ()=>({ctx,w,h}=fitCanvas(c)));
  const trails=[];
  function addTrail(){
    const y=rand(h*0.25,h*0.6), dir=Math.random()<.5?1:-1;
    const x=dir===1?-50:w+50, vx=dir*rand(5,7), vy=rand(-1.2,1.2);
    const life=rInt(70,110); trails.push({x,y,vx,vy,life});
  }
  for(let i=0;i<10;i++) setTimeout(addTrail, i*900);
  (function loop(){
    ctx.fillStyle='rgba(5,6,18,.25)'; ctx.fillRect(0,0,w,h);
    for(let i=trails.length-1;i>=0;i--){
      const t=trails[i];
      t.x+=t.vx; t.y+=t.vy; t.life--;
      // trail
      const lg=ctx.createLinearGradient(t.x,t.y,t.x-t.vx*12,t.y-t.vy*12);
      lg.addColorStop(0,'rgba(255,255,255,.95)'); lg.addColorStop(1,'rgba(255,255,255,0)');
      ctx.strokeStyle=lg; ctx.lineWidth=2; ctx.beginPath();
      ctx.moveTo(t.x,t.y); ctx.lineTo(t.x-t.vx*14,t.y-t.vy*14); ctx.stroke();
      ctx.beginPath(); ctx.fillStyle='#fff'; ctx.globalAlpha=1; ctx.arc(t.x,t.y,2.2,0,Math.PI*2); ctx.fill();
      if(t.life<=0) trails.splice(i,1);
    }
    requestAnimationFrame(loop);
  })();
}

/* ===================== SCENE 4: Hearts & Balloons ===================== */
function initHearts(){
  const c=$('#cv-hearts'); let {ctx,w,h}=fitCanvas(c);
  addEventListener('resize', ()=>({ctx,w,h}=fitCanvas(c)));
  const items=[];
  function addHeart(){
    const x=rand(w*0.15, w*0.85), size=rand(10,18), vy=rand(-1.6,-0.9), rot=rand(-.02,.02);
    items.push({type:'heart', x, y:h+40, size, vy, rot, a:1, r:0});
  }
  function addBalloon(){
    const x=rand(w*0.15, w*0.85), vy=rand(-1.2,-0.7), hue=rInt(0,360);
    items.push({type:'balloon', x, y:h+60, vy, hue, burst:false, t:0});
  }
  for(let i=0;i<20;i++) setTimeout(addHeart, i*400);
  for(let i=0;i<10;i++) setTimeout(addBalloon, 800+i*800);

  function drawHeart(x,y,s,rot){
    ctx.save(); ctx.translate(x,y); ctx.rotate(rot);
    ctx.beginPath();
    ctx.moveTo(0,-s*0.2);
    ctx.bezierCurveTo(-s,-s, -s*1.6, s*0.4, 0, s*1.4);
    ctx.bezierCurveTo(s*1.6, s*0.4, s, -s, 0, -s*0.2);
    const g=ctx.createLinearGradient(0,-s,0,s*1.4);
    g.addColorStop(0,'#ff9adf'); g.addColorStop(1,'#ff4fb9');
    ctx.fillStyle=g; ctx.fill(); ctx.restore();
  }
  function drawBalloon(x,y,hue){
    ctx.save(); ctx.translate(x,y);
    ctx.beginPath(); ctx.ellipse(0,0,14,18,0,0,Math.PI*2);
    ctx.fillStyle=`hsl(${hue},90%,65%)`; ctx.fill();
    ctx.beginPath(); ctx.moveTo(0,18); ctx.lineTo(0,34);
    ctx.strokeStyle=`hsl(${hue},60%,75%)`; ctx.lineWidth=1.2; ctx.stroke();
    ctx.restore();
  }
  function burst(x,y,hue){
    for(let i=0;i<80;i++){
      parts.push({x,y,vx:Math.cos(i/80*Math.PI*2)*rand(1.6,2.6), vy:Math.sin(i/80*Math.PI*2)*rand(1.6,2.6), life:rInt(50,80), color:`hsl(${hue},90%,70%)`});
    }
  }
  const parts=[];
  (function loop(){
    ctx.fillStyle='rgba(5,6,18,.25)'; ctx.fillRect(0,0,w,h);
    for(const it of items){
      if(it.type==='heart'){ it.y+=it.vy; it.r+=it.rot; drawHeart(it.x,it.y,it.size,it.r); }
      else{
        it.y+=it.vy; it.t++;
        drawBalloon(it.x,it.y,it.hue);
        if(!it.burst && it.t>rInt(70,120)){ it.burst=true; burst(it.x,it.y-2,it.hue); }
      }
    }
    for(let i=parts.length-1;i>=0;i--){
      const p=parts[i]; p.x+=p.vx; p.y+=p.vy; p.vy+=.02; p.life--;
      ctx.beginPath(); ctx.globalAlpha=Math.max(0,p.life/80); ctx.fillStyle=p.color; ctx.arc(p.x,p.y,1.7,0,Math.PI*2); ctx.fill();
      if(p.life<=0) parts.splice(i,1);
    }
    requestAnimationFrame(loop);
  })();
}

/* ===================== SCENE 5: Aurora waves ===================== */
function initAurora(){
  const c=$('#cv-aurora'); let {ctx,w,h}=fitCanvas(c);
  addEventListener('resize', ()=>({ctx,w,h}=fitCanvas(c)));
  const waves=Array.from({length:5},(_,i)=>({y:h*0.4+i*40, t:rand(0,10), hue:180+i*30}));
  (function loop(){
    ctx.clearRect(0,0,w,h);
    for(const a of waves){
      a.t+=.015;
      const path=[];
      for(let x=0;x<=w;x+=24){
        const y = h*0.6 + Math.sin(x*0.004 + a.t)*30 + Math.sin(x*0.002+a.t*1.4)*18;
        path.push({x,y});
      }
      const grd=ctx.createLinearGradient(0,a.y,w,a.y);
      grd.addColorStop(0,`hsla(${a.hue}, 90%, 70%, .10)`);
      grd.addColorStop(1,`hsla(${a.hue+60}, 90%, 65%, .12)`);
      ctx.fillStyle=grd;
      ctx.beginPath(); ctx.moveTo(0,h);
      for(const p of path) ctx.lineTo(p.x,p.y);
      ctx.lineTo(w,h); ctx.closePath(); ctx.fill();
    }
    requestAnimationFrame(loop);
  })();
}

/* ===================== SCENE 6: Compliments mirror ===================== */
function initMirror(){
  const orb=$('#orb');
  const lines=['Most beautiful smile ‚ú®','Kindest heart üíñ','You light up my world üåü','You are my favorite miracle üîÆ','Unstoppable, brilliant, loved üí´'];
  let i=0; const t=setInterval(()=>{ i=(i+1)%lines.length; orb.textContent=lines[i];
    orb.style.boxShadow='0 0 110px rgba(255,255,255,.95), inset 0 0 60px rgba(255,255,255,.9)';
    setTimeout(()=>orb.style.boxShadow='0 0 110px rgba(160,200,255,.6), inset 0 0 60px rgba(255,255,255,.9)',420);
  }, 1600);
}

/* ===================== SCENE 7: Secret letter (auto-type) ===================== */
function initLetter(){
  const area=$('#typeArea');
  const text=`My dearest Guddu,

Tonight the sky is brighter‚Äîbecause it carries my wish for you.
Thank you for your kindness, your laughter, and the magic you bring.

I wish you calm mornings, brave dreams, and a thousand reasons to smile.
I‚Äôm grateful for you today and every day.

Happy Birthday, my star.
Always yours. üíñ`;
  let i=0; function render(){ area.innerHTML=`<span>${text.slice(0,i).replace(/\n/g,'<br>')}</span><span class="caret"></span>`;}
  render();
  const speed=22; const t=setInterval(()=>{ i++; render(); if(i>=text.length) clearInterval(t); }, speed);
}

/* ===================== SCENE 8: Fireworks phrases ===================== */
function initFire(){
  const c=$('#cv-fire'); let {ctx,w,h}=fitCanvas(c);
  addEventListener('resize', ()=>({ctx,w,h}=fitCanvas(c)));
  const parts=[];
  function boom(x,y,hue){
    for(let i=0;i<160;i++){
      const a=Math.PI*2*(i/160)+rand(-.02,.02); const s=rand(2.2,3.4);
      parts.push({x,y,vx:Math.cos(a)*s*rand(.6,1.4), vy:Math.sin(a)*s*rand(.6,1.4), life:rInt(70,100), color:`hsl(${hue},90%,60%)`});
    }
  }
  // Sequence of booms + words
  let t=0;
  const words=['HAPPY BIRTHDAY','GUDDU','YOU ARE LOVED','FOREVER SPECIAL'];
  const seq=setInterval(()=>{
    boom(rand(w*.25,w*.75), rand(h*.35,h*.6), rInt(0,360));
    t++;
    if(t%3===0){
      ctx.save(); ctx.fillStyle='rgba(255,255,255,.95)'; ctx.font=`900 ${Math.max(28, w/12)}px system-ui`;
      ctx.textAlign='center'; ctx.textBaseline='middle';
      const word=words[(t/3-1)%words.length];
      ctx.fillText(word, w/2, h*.5);
      ctx.restore();
    }
    if(t>10) clearInterval(seq);
  }, 900);

  (function loop(){
    ctx.fillStyle='rgba(5,6,16,.22)'; ctx.fillRect(0,0,w,h);
    for(let i=parts.length-1;i>=0;i--){
      const p=parts[i]; p.x+=p.vx; p.y+=p.vy; p.vy+=.02; p.life--;
      ctx.beginPath(); ctx.fillStyle=p.color; ctx.globalAlpha=Math.max(0,p.life/100);
      ctx.arc(p.x,p.y,1.8,0,Math.PI*2); ctx.fill();
      if(p.life<=0) parts.splice(i,1);
    }
    requestAnimationFrame(loop);
  })();
}

/* ===================== SCENE 9: Finale (no extra JS needed) ===================== */
function initFinale(){ /* message already in HTML; music fades via timeline */ }

</script>
</body>
</html>
